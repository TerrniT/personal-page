---
import { getCollection } from 'astro:content'
import PageLayout from '@layouts/PageLayout.astro'
import Container from '@components/Container.astro'
import { dateRange } from '@lib/utils'
import { t } from 'i18next'

const collection = (await getCollection('about')).sort(
  (a, b) => new Date(b.data.dateStart).valueOf() - new Date(a.data.dateStart).valueOf(),
)

const work = await Promise.all(
  collection.map(async (item) => {
    const { Content } = await item.render()
    return { ...item, Content }
  }),
)
---

<PageLayout title={t('about.title')} description={t('about.description')}>
  <Container>
    <h1 class="animate text-xl font-semibold text-black dark:text-white">{t('about.heading')}</h1>
    <div class="space-y-16">
      <section class="animate flex flex-col items-center space-y-4">
        <article class="space-y-4">
          <p class="animate">
            {t('about.paragraph')}
          </p>
        </article>
        <img src="/hero.png" alt="hero image" class="animate mt-3 h-[150px] md:h-[180px]" />
      </section>
    </div>
    <div class="mt-14 space-y-6">
      <h2 class="animate text-lg font-semibold text-black dark:text-white">{t('about.bio.heading')}</h2>
      <ul class="flex flex-col">
        {
          work.map((entry) => (
            <li class="animate">
              <div class="text-sm opacity-75">{dateRange(entry.data.dateStart, entry.data.dateEnd)}</div>
              <div class="font-semibold text-black dark:text-white">{entry.data.company}</div>
              <div class="text-sm opacity-75">{entry.data.role}</div>
              <article>
                <entry.Content />
              </article>
            </li>
          ))
        }
      </ul>
    </div>
    <div class="mt-14 space-y-6">
      <h2 class="animate text-lg font-semibold text-black dark:text-white">{t('about.hard_skills.heading')}</h2>
      WIP
    </div>
    <div class="mt-14 space-y-6">
      <h2 class="animate text-lg font-semibold text-black dark:text-white">{t('about.expertise.heading')}</h2>
      WIP
    </div>
    <div class="mt-14 space-y-6">
      <h2 class="animate text-lg font-semibold text-black dark:text-white">{t('about.languages.heading')}</h2>
      <section>
        <article class="space-y-4">
          <p class="animate">
            {t('about.languages.paragraph')}
          </p>
        </article>
      </section>
      WIP
    </div>
  </Container>
</PageLayout>
